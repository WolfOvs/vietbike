(this.webpackJsonproot=this.webpackJsonproot||[]).push([[14],{805:function(e,t,a){"use strict";a.r(t);var n=a(15),c=a(12),r=a(0),i=a.n(r),s=a(10),o=a.n(s),d=a(24),l=a(80),h=a(59),u=a(21),m=a(65),p=a(32),b=a(26),T=a(795),C=a(14);Performance.propTypes={stations:o.a.array},Performance.defaultProps={stations:[]},t.default=Object(l.b)(e=>({keyTopik:e.mqtt.keyTopik,labels:e.labels.labels,trends:e.trends.trends,trendsArchive:e.trends.trendsArchive,notifications:e.notifications,currentChart:e.trends.currentChart}),e=>({dispatchDisconnetTopic:()=>e(Object(p.k)()),dispatchGetCardTrend:(t,a)=>e(Object(u.B)(t,a)),dispatchGetLabels:t=>e(Object(m.d)(t)),dispatchDownloadCSV:(t,a,n)=>e(Object(u.E)(t,a,n)),dispatchEditTrends:(t,a,n)=>e(Object(u.A)(t,a,n)),dispatchDeliteTrends:(t,a)=>e(Object(u.z)(t,a)),dispatchCreateTrend:(t,a,n)=>e(Object(u.y)(t,a,n)),dispatchResetNotifications:()=>e(Object(b.h)()),dispatchGetTrendChart:(t,a,n,c,r)=>e(Object(u.D)(t,a,n,c,r)),dispatchGetChartByParameters:t=>e(Object(u.C)(t)),dispatchResetCurrentChart:()=>e(Object(u.F)())}))((function(e){const t=e.keyTopik,a=e.login,r=e.stations,s=e.match,o=e.title,l=e.trends,u=e.trendsArchive,m=e.notifications,p=e.labels,b=e.currentChart,f=e.dispatchDisconnetTopic,v=e.dispatchGetCardTrend,O=e.dispatchGetLabels,S=e.dispatchDownloadCSV,j=e.dispatchEditTrends,B=e.dispatchDeliteTrends,E=e.dispatchCreateTrend,k=e.dispatchResetNotifications,y=e.dispatchGetTrendChart,w=e.dispatchGetChartByParameters,g=e.dispatchResetCurrentChart,D=s.params.idtcs,N=s.params.id,G=i.a.useState({stationName:"",turbochargerName:""}),A=Object(c.a)(G,2),I=A[0],M=A[1],P=i.a.useState(null),z=Object(c.a)(P,2),R=z[0],V=z[1],J=i.a.useState(null),x=Object(c.a)(J,2),F=x[0],H=x[1],L=i.a.useState("dashboard"),q=Object(c.a)(L,2),_=q[0],K=q[1],Q=i.a.useState([]),U=Object(c.a)(Q,2),W=U[0],X=U[1],Y=i.a.useState(null),Z=Object(c.a)(Y,2),$=Z[0],ee=Z[1],te=i.a.useState(null),ae=Object(c.a)(te,2),ne=ae[0],ce=ae[1],re=i.a.useState(!1),ie=Object(c.a)(re,2),se=ie[0],oe=ie[1],de=i.a.useState("create"),le=Object(c.a)(de,2),he=le[0],ue=le[1],me=i.a.useState(!1),pe=Object(c.a)(me,2),be=pe[0],Te=pe[1],Ce=i.a.useState([]),fe=Object(c.a)(Ce,2),ve=fe[0],Oe=fe[1];i.a.useEffect(()=>{t&&f()},[f,t]),i.a.useEffect(()=>{N===F&&D===R||(V(D),H(N),M({stationName:"",turbochargerName:""}),X(null),ee(null),ce(null))},[D,N,F,R]),i.a.useEffect(()=>{F&&R&&v({station:C.B[F],idTC:R,archive:"archive"===_},a.token)},[F,R,_,v,a]),i.a.useEffect(()=>{if(p){if(F&&C.B[F]&&R&&p[C.B[F]]){const e=p[C.B[F]][R];e?JSON.stringify(e)!==JSON.stringify(ve)&&Oe(e):O({station:C.B[F],idTC:R})}}else O({station:C.B[F],idTC:R})},[p,F,R,ve,O]),i.a.useEffect(()=>{l&&l[C.B[F]]&&(ne&&l[C.B[F]][R].findIndex(e=>e.id===ne.id)>=0&&ce(l[C.B[F]][R].find(e=>e.id===ne.id)),l[C.B[F]]&&l[C.B[F]][R]?X(l[C.B[F]][R]):X([]))},[l,F,ne,R]),i.a.useEffect(()=>{u&&u[C.B[F]]&&(ne&&u[C.B[F]][R].findIndex(e=>e.id===ne.id)>=0&&ce(u[C.B[F]][R].find(e=>e.id===ne.id)),l[C.B[F]]&&l[C.B[F]][R]?ee(u[C.B[F]][R]):ee([]))},[l,u,F,ne,R]),i.a.useEffect(()=>{const e=Object(C.p)(r,F),t=Object(C.r)(r,F,R);e&&t&&M({stationName:e.name,turbochargerName:t.name})},[r,F,R,M]);const Se=e=>{ue("edit"),oe(!0),ce(e)},je=e=>{e.forEach(e=>S(e,a.token,e.fileName))},Be=e=>{B({station:C.B[F],idTC:R,idTrend:e,archive:!0},a.token)},Ee=e=>{const t=Object(n.a)({},e);t.id=(new Date).getTime(),t.name="",ce(t),ue("create"),oe(!0)},ke=I.stationName,ye=I.turbochargerName;let we=Object(C.A)(F);const ge=Object(C.h)({key:"trend",title:o,url:s.url,nameStation:ke,nameTCS:ye,currentStationId:F,currentTurbochargerId:R}),De=[{key:"addIcon",onClick:()=>{ue("create"),oe(!0),ce({id:(new Date).getTime(),name:"",dateFrom:(new Date).setHours((new Date).getHours()-1),dateTo:(new Date).getTime(),listParameters:[],sliders:null,comments:null})}},{key:"download",onClick:()=>Te(!0)}];return i.a.createElement(T.k,{stations:r,pageCurrent:s,stationActive:F,tcsActive:R,pathsMenu:[{key:"panoramicaTcs",title:i.a.createElement(d.a,{id:"panoramica_tc"}),url:"/panoramicaStazione/".concat(F,"/panoramicaTCS/").concat(R),active:!1},{key:"panoramicaStazione",title:i.a.createElement(d.a,{id:"trend"}),url:"/panoramicaStazione/".concat(F,"/panoramicaTCS/").concat(R,"/trend"),active:!0},{key:"avvisiTcs",title:i.a.createElement(d.a,{id:"avvisi"}),url:"/panoramicaStazione/".concat(F,"/panoramicaTCS/").concat(R,"/avvisi"),active:!1}],accordionMenu:C.e.urlAccordionMenu(F,R)},i.a.createElement(h.f,{showNotification:{show:m.show,message:m.message,type:m.status,resetNotifications:()=>{k()}}},i.a.createElement("div",{className:"dflex"},i.a.createElement(h.e,{paths:ge}),i.a.createElement(h.y,{options:[{key:"dashboard",value:"Dashboard"},{key:"archive",value:"Archivio"}],valueActive:_,onChange:e=>K(e),bgSelect:"#426085",colorBorder:"#dce2ea"})),i.a.createElement(h.b,{icons:De})),we?(()=>{switch(_){case"dashboard":return i.a.createElement("div",{className:"wrapper-overflow"},i.a.createElement(h.w,{key:"masonry-".concat(F,"-").concat(R)},W&&W.map(e=>i.a.createElement(T.r,{key:"masonry-card-".concat(F,"-").concat(R,"-").concat(e.id),dataTrend:e,stationID:C.B[F],tcsID:R,labels:ve,handleShowModal:Se,getTrendCSV:je,dispatchGetTrendChart:y}))));case"archive":return $&&i.a.createElement(T.u,{trendsTC:[...$],handleShowModal:Se,deliteTrend:Be,duplicateTrend:Ee});default:return i.a.createElement(h.t,null)}})():i.a.createElement(h.t,null),se&&ne&&i.a.createElement(T.s,{dataTrend:ne,stationID:C.B[F],tcsID:R,handleShowModal:oe,showModal:se,type:he,labels:ve,archive:"archive"===_,currentChart:b,getTrendCSV:je,saveTrend:(e,t)=>{e.name.length>0&&("edit"===t?(e=>{let t=Object(n.a)({},e),c={station:C.B[F],idTC:R,idTrend:t.id,archive:"archive"===_};"archive"!==_&&(t.dateFrom=null,t.dateTo=null),j(c,t,a.token),oe(!1)})(e):(e=>{let t=Object(n.a)({},e);t.id=(new Date).getTime(),E({station:C.B[F],idTC:R,archive:!0},t,a.token)})(e),oe(!1))},dispatchGetChartByParameters:w,dispatchGetTrendChart:y,dispatchResetCurrentChart:g}),be&&i.a.createElement(T.t,{station:C.B[F],tcs:R,showModal:be,onCloseModal:Te,trendsTC:"archive"===_?$:W,getTrendCSV:je}))}))}}]);