(this.webpackJsonproot=this.webpackJsonproot||[]).push([[21],{820:function(e,t,a){"use strict";a.r(t);var n=a(12),c=a(0),i=a.n(c),l=a(24),r=a(80),s=a(59),o=a(795),u=a(14),v=a(3);function m(){const e=Object(v.a)(["\n  padding: 20px 0 0 16px;\n"]);return m=function(){return e},e}const d=a(2).c.div(m());var p=a(47),k=a(32);function f(e){const t=e.stations,a=e.match,c=e.title,r=e.dispatchGetAlarms,v=e.dispatchGetAlarmsByDevice,m=e.alarms,p=e.dispatchDisconnetTopic,k=e.login,f=e.keyTopik,h=a.params.id,y=i.a.useState(!0),b=Object(n.a)(y,2),E=b[0],g=b[1],j=i.a.useState(!1),D=Object(n.a)(j,2),O=D[0],S=D[1],w=i.a.useState(null),A=Object(n.a)(w,2),T=A[0],z=A[1],F=i.a.useState([]),G=Object(n.a)(F,2),I=G[0],L=G[1],B=i.a.useState(null),x=Object(n.a)(B,2),J=x[0],R=x[1];i.a.useEffect(()=>{p()},[p,f]),i.a.useEffect(()=>{g(!1)},[m]),i.a.useEffect(()=>{const e=Object(u.p)(t,h);z(e);let a=[];e&&(a=[{key:"all",value:"Tutta la centrale"}],e.data.tcs.map(e=>a.push({key:e.id.toString(),value:e.name}))),R({dateFrom:(new Date).setDate((new Date).getDate()-1),dateTo:(new Date).getTime(),isReal:!1,valueActive:{key:"all",value:"Tutta la centrale"}}),L(a)},[h,t]),i.a.useEffect(()=>{if(J){g(!0);const e={};e.station=u.B[h],J.valueActive&&"all"!==J.valueActive.key&&(e.device=J.valueActive.key),e.from=1e6*J.dateFrom,e.to=1e6*J.dateTo;let t=null;return J.isReal?t=e.device?setInterval(()=>{e.to=1e6*new Date,v(e,k.token)},5e3):setInterval(()=>{e.to=1e6*new Date,r(e,k.token)},5e3):(clearInterval(t),e.device?v(e,k.token):r(e,k.token)),()=>{clearInterval(t)}}},[J,h,r,v,k]);const _=T?T.name:"";return i.a.createElement(o.k,{stations:t,pathsMenu:[{key:"panoramica_stazione",title:i.a.createElement(l.a,{id:"panoramica_stazione"}),url:"/panoramicaStazione/".concat(h),active:!1},{key:"trend",title:i.a.createElement(l.a,{id:"trend"}),url:"/panoramicaStazione/".concat(h,"/trend/"),active:!1},{key:"avvisiStazione",title:c,url:a.url,active:!0}],stationActive:h,pageCurrent:a},i.a.createElement(s.f,null,i.a.createElement(s.e,{paths:[{key:"home",title:"Home",url:"/"},{key:"panoramicaStazione",title:_,url:"/panoramicaStazione/".concat(h)},{key:"avvisiTcs",title:window.dictionary("avvisi"),url:a.url}]})),J?i.a.createElement(i.a.Fragment,null,i.a.createElement(d,null,i.a.createElement(s.c,{values:J,selectList:I,getFilters:e=>R(e),changeActiveLayer:S})),i.a.createElement(s.n,{data:m,activeLayer:O,showLoading:E})):i.a.createElement(s.t,null))}f.defaultProps={stations:[]};t.default=Object(r.b)(e=>({alarms:e.alarms.data||[]}),e=>({dispatchDisconnetTopic:()=>e(Object(k.k)()),dispatchGetAlarms:(t,a)=>e(Object(p.g)(t,a)),dispatchGetAlarmsByDevice:(t,a)=>e(Object(p.h)(t,a))}))(f)}}]);