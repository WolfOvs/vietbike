(this.webpackJsonproot=this.webpackJsonproot||[]).push([[23],{821:function(e,t,a){"use strict";a.r(t);var c=a(12),n=a(0),i=a.n(n),l=a(24),r=a(80),o=a(59),s=a(795),u=a(14),m=a(3);function d(){const e=Object(m.a)(["\n  padding: 20px 0 0 16px;\n"]);return d=function(){return e},e}const p=a(2).c.div(d());var v=a(47),k=a(32);function f(e){const t=e.stations,a=e.match,n=e.title,r=e.dispatchGetAlarms,m=e.dispatchGetAlarmsByDevice,d=e.alarms,v=e.dispatchDisconnetTopic,k=e.login,f=e.keyTopik,y=a.params.idtcs,h=a.params.id,b=i.a.useState(null),S=Object(c.a)(b,2),E=S[0],O=S[1],j=i.a.useState(null),g=Object(c.a)(j,2),A=g[0],w=g[1],D=i.a.useState(!0),T=Object(c.a)(D,2),z=T[0],C=T[1],F=i.a.useState(!1),G=Object(c.a)(F,2),I=G[0],L=G[1],B=i.a.useState([]),M=Object(c.a)(B,2),x=M[0],J=M[1],R=i.a.useState(null),_=Object(c.a)(R,2),H=_[0],P=_[1];i.a.useEffect(()=>{v()},[v,f]),i.a.useEffect(()=>{if(H){C(!0);const e={};e.station=u.B[h],H.valueActive&&"all"!==H.valueActive.key?e.device=H.valueActive.key:e.device=null,e.from=1e6*H.dateFrom,e.to=1e6*H.dateTo;let t=null;return H.isReal?t=e.device?setInterval(()=>{e.to=1e6*new Date,m(e,k.token)},5e3):setInterval(()=>{e.to=1e6*new Date,r(e,k.token)},5e3):(clearInterval(t),e.device?m(e,k.token):r(e,k.token)),()=>{clearInterval(t)}}},[h,r,m,k.token,H]),i.a.useEffect(()=>{const e=Object(u.p)(t,h),a=Object(u.r)(t,h,y);if(e&&a){O(e),w(a);let t=[];e&&(t=[{key:"all",value:"Tutta la centrale"}],e.data.tcs.map(e=>t.push({key:e.id.toString(),value:e.name}))),P({dateFrom:(new Date).setDate((new Date).getDate()-1),dateTo:(new Date).getTime(),isReal:!1,valueActive:t.find(e=>e.key===y)}),J(t)}},[t,h,y]),i.a.useEffect(()=>{C(!1)},[d]);const W=E?E.name:"",q=A?A.name:"";return i.a.createElement(s.k,{pathsMenu:[{key:"panoramica_tc",title:i.a.createElement(l.a,{id:"panoramica_tc"}),url:"/panoramicaStazione/".concat(h,"/panoramicaTCS/").concat(y),active:!1},{key:"trend",title:i.a.createElement(l.a,{id:"trend"}),url:"/panoramicaStazione/".concat(h,"/panoramicaTCS/").concat(y,"/trend"),active:!1},{key:"avvisiTcs",title:n,url:a.url,active:!0}],accordionMenu:u.e.urlAccordionMenu(h,y),stations:t,stationActive:h,tcsActive:y,pageCurrent:a},i.a.createElement(o.f,null,i.a.createElement(o.e,{paths:[{key:"home",title:"Home",url:"/"},{key:"panoramicaStazione",title:W,url:"/panoramicaStazione/".concat(h)},{key:"tcsOverflow",title:q,url:"/panoramicaStazione/".concat(h,"/panoramicaTCS/").concat(y)},{key:"tcsWarning",title:window.dictionary("avvisi"),url:a.url}]})),H?i.a.createElement(i.a.Fragment,null,i.a.createElement(p,null,i.a.createElement(o.c,{values:H,selectList:x,getFilters:e=>P(e),changeActiveLayer:L})),i.a.createElement(o.n,{data:d,activeLayer:I,showLoading:z})):i.a.createElement(o.t,null))}f.defaultProps={stations:[]};t.default=Object(r.b)(e=>({alarms:e.alarms.data||[]}),e=>({dispatchDisconnetTopic:()=>e(Object(k.k)()),dispatchGetAlarms:(t,a)=>e(Object(v.g)(t,a)),dispatchGetAlarmsByDevice:(t,a)=>e(Object(v.h)(t,a))}))(f)}}]);