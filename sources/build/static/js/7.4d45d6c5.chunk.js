(this.webpackJsonproot=this.webpackJsonproot||[]).push([[7],{815:function(t,e,a){"use strict";a.r(e);var c=a(15),s=a(12),l=a(0),n=a.n(l),r=a(10),i=a.n(r),u=a(24),o=a(80),b=a(59),g=a(32),d=a(65),O=a(68),h=a(39),j=a(38),f=a(795),L=a(14);var p={configurationTab:t=>{switch(t){case"3":return[{key:"coce1",value:"coce1"},{key:"coce2",value:"coce2"},{key:"tuga",value:"tuga"}];default:return[]}},configureWorkPointers:({data:t,tcs:e,activeTab:a,labels:c,thresholds:s,typeTag:l="tagCliente"})=>{if(t)switch(e){case"3":switch(a){case"coce1":{const e=Object(L.k)(c.tagList,"FEVAL-0","tagAcn"),a=Object(L.k)(c.tagList,"FEVAL-1","tagAcn");return[{label:"Q:",title:Object(L.k)(c.tagList,"FEVAL-0","labelTable"),tag:Object(L.k)(c.tagList,"FEVAL-0",l),value:"".concat(Object(L.w)(t,e)," [").concat(Object(L.s)(Object(L.t)(t,e)),"]"),tagValue:e},{label:"H:",title:Object(L.k)(c.tagList,"FEVAL-1","labelTable"),tag:Object(L.k)(c.tagList,"FEVAL-1",l),value:"".concat(Object(L.w)(t,a)," [").concat(Object(L.s)(Object(L.t)(t,a)),"]"),tagValue:a}]}case"coce2":{const e=Object(L.k)(c.tagList,"FEVAL-9","tagAcn"),a=Object(L.k)(c.tagList,"FEVAL-10","tagAcn");return[{label:"Q:",title:Object(L.k)(c.tagList,"FEVAL-9","labelTable"),tag:Object(L.k)(c.tagList,"FEVAL-9",l),value:"".concat(Object(L.w)(t,e)," [").concat(Object(L.s)(Object(L.t)(t,e)),"]"),tagValue:e},{label:"H:",title:Object(L.k)(c.tagList,"FEVAL-10","labelTable"),tag:Object(L.k)(c.tagList,"FEVAL-10",l),value:"".concat(Object(L.w)(t,a)," [").concat(Object(L.s)(Object(L.t)(t,a)),"]"),tagValue:a}]}case"tuga":default:return null}default:return null}return null},configureDataTable:({data:t,tcs:e,activeTab:a,labels:s,thresholds:l,typeTag:n="tagCliente"})=>{if(t)switch(e){case"3":let e=Object(c.a)({},s),r=Object(c.a)({},s.tablePage[a]);switch(e.tablePage=r,a){case"coce1":case"coce2":return Object(L.F)({data:t,labels:e,thresholds:l,typeTag:n});case"tuga":default:return null}default:return null}return null}};var T={configurationTab:t=>{switch(t){case"3":case"4":case"5":return[{key:"coce1",value:"coce"},{key:"tuga",value:"tuga"}];default:return[]}},configureWorkPointers:({data:t,tcs:e,activeTab:a,labels:c,thresholds:s,typeTag:l="tagCliente"})=>{if(t)switch(e){case"3":case"4":case"5":switch(a){case"coce1":const e=Object(L.k)(c.tagList,"FEVAL-0","tagAcn"),a=Object(L.k)(c.tagList,"FEVAL-1","tagAcn");return[{label:"Q:",title:Object(L.k)(c.tagList,"FEVAL-0","labelTable"),tag:Object(L.k)(c.tagList,"FEVAL-0",l),value:"".concat(Object(L.w)(t,e)," [").concat(Object(L.s)(Object(L.t)(t,e)),"]"),tagValue:e},{label:"H:",title:Object(L.k)(c.tagList,"FEVAL-1","labelTable"),tag:Object(L.k)(c.tagList,"FEVAL-1",l),value:"".concat(Object(L.w)(t,a)," [").concat(Object(L.s)(Object(L.t)(t,a)),"]"),tagValue:a}];case"tuga":default:return null}default:return null}return null},configureDataTable:({data:t,tcs:e,activeTab:a,labels:s,thresholds:l,typeTag:n="tagCliente"})=>{if(t)switch(e){case"3":case"4":case"5":let e=Object(c.a)({},s),r=Object(c.a)({},s.tablePage[a]);switch(e.tablePage=r,a){case"coce1":return Object(L.F)({data:t,labels:e,thresholds:l,typeTag:n});case"tuga":default:return null}default:return null}return null}};var k={configurationTab:t=>{switch(t){case"1":case"2":case"3":return[{key:"coce1",value:"coce"},{key:"tuga",value:"tuga"}];default:return[]}},configureWorkPointers:({data:t,tcs:e,activeTab:a,labels:c,thresholds:s,typeTag:l="tagCliente"})=>{if(t)switch(e){case"1":case"2":case"3":switch(a){case"coce1":const e=Object(L.k)(c.tagList,"FEVAL-0","tagAcn"),a=Object(L.k)(c.tagList,"FEVAL-1","tagAcn");return[{label:"Q:",title:Object(L.k)(c.tagList,"FEVAL-0","labelTable"),tag:Object(L.k)(c.tagList,"FEVAL-0",l),value:"".concat(Object(L.w)(t,e)," [").concat(Object(L.s)(Object(L.t)(t,e)),"]"),tagValue:e},{label:"H:",title:Object(L.k)(c.tagList,"FEVAL-1","labelTable"),tag:Object(L.k)(c.tagList,"FEVAL-1",l),value:"".concat(Object(L.w)(t,a)," [").concat(Object(L.s)(Object(L.t)(t,a)),"]"),tagValue:a}];case"tuga":default:return null}default:return null}return null},configureDataTable:({data:t,tcs:e,activeTab:a,labels:s,thresholds:l,typeTag:n="tagCliente"})=>{if(t)switch(e){case"1":case"2":case"3":let e=Object(c.a)({},s),r=Object(c.a)({},s.tablePage[a]);switch(e.tablePage=r,a){case"coce1":return Object(L.F)({data:t,labels:e,thresholds:l,typeTag:n});case"tuga":default:return null}default:return null}return null}};var v={configurationTab:t=>{switch(t){case"3":case"4":case"5":return[{key:"coce1",value:"coce"},{key:"tuga",value:"tuga"}];default:return[]}},configureWorkPointers:({data:t,tcs:e,activeTab:a,labels:c,thresholds:s,typeTag:l="tagCliente"})=>{if(t)switch(e){case"3":case"4":case"5":switch(a){case"coce1":const e=Object(L.k)(c.tagList,"FEVAL-0","tagAcn"),a=Object(L.k)(c.tagList,"FEVAL-1","tagAcn");return[{label:"Q:",title:Object(L.k)(c.tagList,"FEVAL-0","labelTable"),tag:Object(L.k)(c.tagList,"FEVAL-0",l),value:"".concat(Object(L.w)(t,e)," [").concat(Object(L.s)(Object(L.t)(t,e)),"]"),tagValue:e},{label:"H:",title:Object(L.k)(c.tagList,"FEVAL-1","labelTable"),tag:Object(L.k)(c.tagList,"FEVAL-1",l),value:"".concat(Object(L.w)(t,a)," [").concat(Object(L.s)(Object(L.t)(t,a)),"]"),tagValue:a}];case"tuga":default:return null}default:return null}return null},configureDataTable:({data:t,tcs:e,activeTab:a,labels:s,thresholds:l,typeTag:n="tagCliente"})=>{if(t)switch(e){case"3":case"4":case"5":let e=Object(c.a)({},s),r=Object(c.a)({},s.tablePage[a]);switch(e.tablePage=r,a){case"coce1":return Object(L.F)({data:t,labels:e,thresholds:l,typeTag:n});case"tuga":default:return null}default:return null}return null}};var E={configurationTab:t=>{switch(t){case"1":case"2":case"3":return[{key:"coce1",value:"coce"},{key:"tuga",value:"tuga"}];default:return[]}},configureWorkPointers:({data:t,tcs:e,activeTab:a,labels:c,thresholds:s,typeTag:l="tagCliente"})=>{if(t)switch(e){case"1":case"2":case"3":switch(a){case"coce1":const e=Object(L.k)(c.tagList,"FEVAL-0","tagAcn"),a=Object(L.k)(c.tagList,"FEVAL-1","tagAcn");return[{label:"Q:",title:Object(L.k)(c.tagList,"FEVAL-0","labelTable"),tag:Object(L.k)(c.tagList,"FEVAL-0",l),value:"".concat(Object(L.w)(t,e)," [").concat(Object(L.s)(Object(L.t)(t,e)),"]"),tagValue:e},{label:"H:",title:Object(L.k)(c.tagList,"FEVAL-1","labelTable"),tag:Object(L.k)(c.tagList,"FEVAL-1",l),value:"".concat(Object(L.w)(t,a)," [").concat(Object(L.s)(Object(L.t)(t,a)),"]"),tagValue:a}];case"tuga":default:return null}default:return null}return null},configureDataTable:({data:t,tcs:e,activeTab:a,labels:s,thresholds:l,typeTag:n="tagCliente"})=>{if(t)switch(e){case"1":case"2":case"3":let e=Object(c.a)({},s),r=Object(c.a)({},s.tablePage[a]);switch(e.tablePage=r,a){case"coce1":return Object(L.F)({data:t,labels:e,thresholds:l,typeTag:n});case"tuga":default:return null}default:return null}return null}};var A=t=>{switch(L.B[t]){case"BO":return p;case"MB":return T;case"MS":return k;case"IS":return v;case"CO":return E;default:return null}};Performance.propTypes={stations:i.a.array},Performance.defaultProps={stations:[]};const m=(t,e,a,c)=>{c.push("/panoramicaStazione/".concat(e,"/panoramicaTCS/").concat(a,"/curva/").concat(t))};e.default=Object(o.b)(t=>({keyTopik:t.mqtt.keyTopik,labels:t.labels.labels,curves:t.curves.curves,thresholds:t.thresholds.thresholds,statusResponse:t.thresholds.statusResponse}),t=>({dispatchConnectionMQTT:(e,a)=>t(Object(g.j)(e,a)),dispatchGetLabels:e=>t(Object(d.d)(e)),dispatchGetCurves:e=>t(Object(O.d)(e)),dispatchGetthresholds:e=>t(Object(j.j)(e)),dispatchEditthresholds:(e,a)=>t(Object(j.i)(e,a)),dispatchresetResetStatusResponseThresholds:()=>t(Object(j.k)()),dispatchCheckOldData:(e,a)=>t(Object(h.g)(e,a))}))((function(t){const e=t.stations,a=t.match,l=t.title,r=t.history,i=t.login,o=t.dispatchConnectionMQTT,g=t.keyTopik,d=t.labels,O=t.dispatchGetLabels,h=t.curves,j=t.dispatchGetCurves,p=t.thresholds,T=t.dispatchGetthresholds,k=t.dispatchEditthresholds,v=t.dispatchCheckOldData,E=t.statusResponse,y=t.dispatchresetResetStatusResponseThresholds,V=a.params.idtcs,w=a.params.id,S=A(w)&&A(w).configurationTab(V).findIndex(t=>t.key===a.params.tab)>=0?a.params.tab:A(w)&&A(w).configurationTab(V)[0]&&A(w).configurationTab(V)[0].key,F=n.a.useState(null),C=Object(s.a)(F,2),D=C[0],P=C[1],B=n.a.useState(null),N=Object(s.a)(B,2),J=N[0],M=N[1],R=n.a.useState(S),Q=Object(s.a)(R,2),G=Q[0],H=Q[1],I=Object(L.J)(null),W=Object(s.a)(I,2),_=W[0],z=W[1],x=n.a.useState(!1),q=Object(s.a)(x,2),K=q[0],U=q[1],X=n.a.useState(!1),Y=Object(s.a)(X,2),Z=Y[0],$=Y[1],tt=n.a.useState(p),et=Object(s.a)(tt,2),at=et[0],ct=et[1],st=n.a.useState(null),lt=Object(s.a)(st,2),nt=lt[0],rt=lt[1],it=n.a.useState(null),ut=Object(s.a)(it,2),ot=ut[0],bt=ut[1],gt=n.a.useState(null),dt=Object(s.a)(gt,2),Ot=dt[0],ht=dt[1],jt=n.a.useState(null),ft=Object(s.a)(jt,2),Lt=ft[0],pt=ft[1],Tt=n.a.useState([]),kt=Object(s.a)(Tt,2),vt=kt[0],Et=kt[1],At=n.a.useState(null),mt=Object(s.a)(At,2),yt=mt[0],Vt=mt[1],wt=n.a.useState(null),St=Object(s.a)(wt,2),Ft=St[0],Ct=St[1],Dt=n.a.useState(null),Pt=Object(s.a)(Dt,2),Bt=Pt[0],Nt=Pt[1];n.a.useEffect(()=>{if(w!==D||V!==J||S!==G){P(w),M(V),H(S),bt(null),Et(null),Vt(null),Ct(null),ht(null),pt(null),rt(null),ct(null),$(!1),U(!1),v(w,V);let t=setInterval(()=>{v(w,V)},L.e.checkOld5Time);Nt(t)}return()=>clearInterval(Bt)},[V,w,S,G,D,J,Bt,v]),n.a.useEffect(()=>{L.B[D]&&L.B[D]!==g&&i.ridp&&o(i.ridp,L.B[D])},[D,g,i.ridp,o]),n.a.useEffect(()=>{if(D&&L.B[D]&&J){const t=Object(L.m)(d,D,J,"curve"),e=Object(L.m)(d,D,J,"sidebar_dx"),a=t&&[...t.tagList.map(t=>{const e=Object(c.a)({},t);return e.tagAcn="".concat(J,"_").concat(t.tagAcn),e}),...e.tagList];if(t){if(JSON.stringify(t)!==JSON.stringify(ot)&&bt(t),JSON.stringify(e)!==JSON.stringify(Ot)&&ht(e),JSON.stringify(Lt)!==JSON.stringify(a)){pt(a);const t=a.filter(t=>"1A"!==t.uom).map(t=>t.tagAcn);T({station:L.B[D],tags:t})}}else O({station:L.B[D],idTC:J})}},[d,D,J,ot,O,Ot,Lt,T]),n.a.useEffect(()=>{const t=Object(L.p)(e,D),a=Object(L.r)(e,D,J);a&&z({tcName:a?a.name:"",tcData:a,station:t})},[e,D,J,ot,z]),n.a.useEffect(()=>{D&&J&&j({station:L.B[D],idTC:J,idPlot:G})},[D,J,G,j]),n.a.useEffect(()=>{const t=h&&h[L.B[D]]&&h[L.B[D]][J]&&h[L.B[D]][J][G];t&&JSON.stringify(t)!==JSON.stringify(vt)&&Et(t)},[D,J,G,h,vt]),n.a.useEffect(()=>{const t=Object(L.p)(e,D),a=Object(L.r)(e,D,J),c=ot?ot.tagList.map(t=>t.tagAcn):[];t&&a&&z({tcName:a?a.name:"",tcData:Object(L.i)(c,a),station:t||null})},[e,D,J,ot,z]),n.a.useEffect(()=>{A(D)&&ot&&(Ct(A(D).configureWorkPointers({data:_.turbochargerData,tcs:J,thresholds:p,activeTab:G,labels:ot})),Vt(A(D).configureDataTable({data:_.turbochargerData,tcs:J,thresholds:p,activeTab:G,labels:ot})))},[_,D,J,G,ot,p]),n.a.useEffect(()=>(document.body.addEventListener("keydown",t=>Jt(t)),()=>document.body.removeEventListener("keydown",t=>Jt(t))),[]),n.a.useEffect(()=>{p&&JSON.stringify(p)!==JSON.stringify(at)&&ct(p)},[p,at]);const Jt=t=>{27===t.keyCode&&(document.querySelector(".show.modal-thresholds")?$(!1):U(!1))},Mt=t=>{t.split("_").length>1?rt(t):rt("".concat(J,"_").concat(t)),$(!Z)},Rt=_.stationData?_.stationData.name:"",Qt=_.turbochargerName?_.turbochargerName:"";let Gt=Object(L.A)(D)&&A(D);const Ht=[{key:"filters",onClick:()=>U(!K)}],It=Object(L.h)({key:"curve",title:l,url:a.url,nameStation:Rt,nameTCS:Qt,currentStationId:D,currentTurbochargerId:J});return n.a.createElement(f.k,{stations:e,pageCurrent:a,stationActive:D,tcsActive:J,pathsMenu:[{key:"panoramicaTcs",title:n.a.createElement(u.a,{id:"panoramica_tc"}),url:"/panoramicaStazione/".concat(D,"/panoramicaTCS/").concat(J),active:!1},{key:"trend",title:n.a.createElement(u.a,{id:"trend"}),url:"/panoramicaStazione/".concat(D,"/panoramicaTCS/").concat(J,"/trend"),active:!1},{key:"avvisiTcs",title:n.a.createElement(u.a,{id:"avvisi"}),url:"/panoramicaStazione/".concat(D,"/panoramicaTCS/").concat(J,"/avvisi"),active:!1}],accordionMenu:L.e.urlAccordionMenu(D,J)},n.a.createElement(b.f,{showTreshold:{show:K,message:"Modalit\xe0 gestione soglie attiva, clicca su un dato per poterle settare o usa il tasto esc per uscire"}},n.a.createElement("div",{className:"dflex"},n.a.createElement(b.e,{paths:It}),A(D)&&A(D).configurationTab(J).length>1&&n.a.createElement(b.y,{options:A(D).configurationTab(J),valueActive:G,onChange:t=>m(t,D,J,r),bgSelect:"#426085",colorBorder:"#dce2ea"})),n.a.createElement(b.b,{icons:Ht})),Gt?n.a.createElement(f.g,{accordionData:[Object(L.n)(_.stationData&&_.stationData.data,Ot&&Ot.environmentData,Ot&&Ot.tagList,"environment",at),Object(L.n)(_.stationData&&_.stationData.data,Ot&&Ot.tcsData,Ot&&Ot.tagList,"tc",at),Object(L.n)(_.stationData&&_.stationData.data,Ot&&Ot.cemsData,Ot&&Ot.tagList,"cems",at),Object(L.n)(_.stationData&&_.stationData.data,Ot&&Ot.gasData,Ot&&Ot.tagList,"gas",at)],isThresholds:K,changeOpenModal:Mt},Gt&&n.a.createElement(f.b,{idSelector:"#cartesian-".concat(G),data:_.turbochargerData,curves:vt&&vt.result,configureTable:yt,workPointers:Ft,isThresholds:K,changeOpenModal:Mt})):n.a.createElement(b.t,null),n.a.createElement(f.j,{showModal:Z,closeModal:$,onSave:t=>{const e={station:L.B[D],tags:[t.tag]};k(e,[t])},statusResponse:E,resetResponseApi:()=>y(),userRole:i.role,searchTag:nt,thresholds:at,labels:Lt}))}))}}]);